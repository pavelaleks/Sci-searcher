<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç Sci-Searcher</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; border-radius: 5px; }
        .success { background: #d4edda; border-color: #c3e6cb; }
        .error { background: #f8d7da; border-color: #f5c6cb; }
        button { padding: 10px 15px; margin: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>üß™ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ Sci-Searcher</h1>
    
    <div class="test-section">
        <h3>1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</h3>
        <p id="pageLoad">–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...</p>
    </div>
    
    <div class="test-section">
        <h3>2. –ü—Ä–æ–≤–µ—Ä–∫–∞ JavaScript</h3>
        <p id="jsTest">–ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è...</p>
    </div>
    
    <div class="test-section">
        <h3>3. –ü—Ä–æ–≤–µ—Ä–∫–∞ API OpenAlex</h3>
        <button onclick="testOpenAlexAPI()">–¢–µ—Å—Ç API</button>
        <p id="apiTest">–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</p>
    </div>
    
    <div class="test-section">
        <h3>4. –ü—Ä–æ–≤–µ—Ä–∫–∞ CORS</h3>
        <button onclick="testCORS()">–¢–µ—Å—Ç CORS</button>
        <p id="corsTest">–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</p>
    </div>
    
    <div class="test-section">
        <h3>5. –ö–æ–Ω—Å–æ–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏</h3>
        <p id="consoleErrors">–ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è...</p>
    </div>

    <script>
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.getElementById('pageLoad').innerHTML = '‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ';
        document.getElementById('pageLoad').parentElement.className = 'test-section success';
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ JavaScript
        try {
            const testVar = 'JavaScript —Ä–∞–±–æ—Ç–∞–µ—Ç';
            document.getElementById('jsTest').innerHTML = '‚úÖ JavaScript —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ';
            document.getElementById('jsTest').parentElement.className = 'test-section success';
        } catch (error) {
            document.getElementById('jsTest').innerHTML = '‚ùå –û—à–∏–±–∫–∞ JavaScript: ' + error.message;
            document.getElementById('jsTest').parentElement.className = 'test-section error';
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Å–æ–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫
        const originalError = console.error;
        const errors = [];
        console.error = function(...args) {
            errors.push(args.join(' '));
            originalError.apply(console, args);
        };
        
        setTimeout(() => {
            if (errors.length === 0) {
                document.getElementById('consoleErrors').innerHTML = '‚úÖ –ö–æ–Ω—Å–æ–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ';
                document.getElementById('consoleErrors').parentElement.className = 'test-section success';
            } else {
                document.getElementById('consoleErrors').innerHTML = '‚ùå –ù–∞–π–¥–µ–Ω—ã –æ—à–∏–±–∫–∏: ' + errors.length;
                document.getElementById('consoleErrors').parentElement.className = 'test-section error';
                errors.forEach(error => {
                    document.getElementById('consoleErrors').innerHTML += '<br>‚Ä¢ ' + error;
                });
            }
        }, 2000);
        
        // –¢–µ—Å—Ç API OpenAlex
        async function testOpenAlexAPI() {
            const apiTest = document.getElementById('apiTest');
            apiTest.innerHTML = 'üîÑ –¢–µ—Å—Ç–∏—Ä—É–µ–º API...';
            
            try {
                const response = await fetch('https://api.openalex.org/works?search=test&per-page=1', {
                    method: 'GET',
                    headers: {
                        'Accept': 'application/json',
                        'User-Agent': 'Sci-Searcher/1.0 (Test)'
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    apiTest.innerHTML = `‚úÖ API —Ä–∞–±–æ—Ç–∞–µ—Ç. –ü–æ–ª—É—á–µ–Ω–æ ${data.results?.length || 0} —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤`;
                    apiTest.parentElement.className = 'test-section success';
                } else {
                    apiTest.innerHTML = `‚ùå API –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É: ${response.status} ${response.statusText}`;
                    apiTest.parentElement.className = 'test-section error';
                }
            } catch (error) {
                apiTest.innerHTML = `‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API: ${error.message}`;
                apiTest.parentElement.className = 'test-section error';
            }
        }
        
        // –¢–µ—Å—Ç CORS
        async function testCORS() {
            const corsTest = document.getElementById('corsTest');
            corsTest.innerHTML = 'üîÑ –¢–µ—Å—Ç–∏—Ä—É–µ–º CORS...';
            
            try {
                const response = await fetch('https://api.openalex.org/works?search=test&per-page=1');
                corsTest.innerHTML = '‚úÖ CORS —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ';
                corsTest.parentElement.className = 'test-section success';
            } catch (error) {
                if (error.message.includes('CORS') || error.message.includes('cross-origin')) {
                    corsTest.innerHTML = '‚ùå –ü—Ä–æ–±–ª–µ–º–∞ —Å CORS: ' + error.message;
                } else {
                    corsTest.innerHTML = '‚ö†Ô∏è –î—Ä—É–≥–∞—è –æ—à–∏–±–∫–∞: ' + error.message;
                }
                corsTest.parentElement.className = 'test-section error';
            }
        }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç API —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
        setTimeout(testOpenAlexAPI, 3000);
    </script>
</body>
</html>

